<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description"
          content="piStar is an online Goal Modeling tool, compliant with iStar 2.0. Useful for creating diagrams for requirements documents.">
    <meta name="author" content="JoÃ£o Pimentel">
    <link rel="icon" href="images/favicon.ico">

    <title>piStar tool</title>

    <!-- bootstrap styles -->
    <link href="lib/bootstrap/bootstrap.min.css" rel="stylesheet">  <!-- Bootstrap core CSS -->

    <!-- library-specific styles -->
    <!--<link rel="stylesheet" href="istarcore/lib/joint.min.css"/> &lt;!&ndash; joint js &ndash;&gt;-->
    <link href="lib/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"> <!-- x-editable -->

    <!-- custom styles -->
    <link rel="stylesheet" href="newui2.css"/>
</head>
<body>
<div class="row menu-bar">
    <!-- piStar logo -->
    <div class="brand col-sm-2 col-md-1 text-center align-middle">
        <a href="#" class="align-middle">piStar</a>
    </div>

    <div class="col-sm-12 col-md-11 p-0 m-0 menu-items">
        <!--<button type="button" class="btn">File <span class="toggleMenuSymbol">&#8648;</span></button>-->
        <!--<button type="button" class="btn active">Add <span class="toggleMenuSymbol">&#8648;</span></button>-->
        <!--<button type="button" class="btn">Diagram</button>-->
        <!--<button type="button" class="btn">Help<span class="toggleMenuSymbol2">&#8689;</span></button>-->
        <a class="btn">File <span class="toggleMenuSymbol">&#8648;</span></a>
        <a class="btn active">Add <span class="toggleMenuSymbol">&#8648;</span></a>
        <a class="btn">Diagram</a>
        <a class="btn">Help <span class="toggleMenuSymbol">&#9651;</span></a>
    </div>
</div>

<div class="row menu-body">
    <!--<div class="col-1 mr-0" href="#"></div>-->
    <div class="col-12 toolbar toolbar-bottom">
        <div class=" w-100" id="collapseExample">
            <div class="card card-body text-white">
                <img src="pallete.png" width="1040px"/>
            </div>
        </div>
    </div>
</div>
<!--</div>-->
<!--<ul class="navbar-nav px-3">-->
<!--<li class="nav-item text-nowrap">-->
<!--<a class="nav-link" href="#">Sign out</a>-->
<!--</li>-->
<!--</ul>-->
<!--</nav>-->
<!--<div id="main-area">-->
<div class="sidepanel">
    <div class="size-options">
        <!--<a href="#" class="q1">&#9634;</a><a href="#" class="q2">&#9634;</a><a href="#" class="q3">&#9634;</a>-->
        <!--<a href="#" class="q1">&#9645;</a><a href="#" class="q2">&#9645;</a><a href="#" class="q3">&#9645;</a>-->
        <!--<a href="#" class="q1">&#9608;</a> <a href="#" class="q2">&#9608;</a> <a href="#" class="q3">&#9608;</a>-->
        <!--<a href="#" class="q2">&#9614;</a> <a href="#" class="q2">&#9613;</a> <a href="#" class="q2">&#9609;</a>-->
        <a href="#" class="collapseSidepanelButton" title="Collapse panel">&#9665;</a> <a href="#" class="expandSidepanelButton" title="Expand panel">&#9655;</a>
        <!--<a href="#" class="q2 collapseSidepanelButton">&#8612;</a> <a href="#" class="q2 expandSidepanelButton">&#8614;</a>-->
    </div>
    <br />Properties:
    <div class="propertiesPanel">
        <table class="table table-hover">
            <tbody>
            <tr>
                <th scope="row">Name</th>
                <td><a href="#" id="currentName" class="propertyValue" data-type="textarea" data-pk="1"
                       data-name="name" data-title="Enter name">Use piStar</a></td>
            </tr>
            <tr>
                <th scope="row"><a href="#" id="propertyName1" class="propertyName" data-type="text" data-pk="1"
                                   data-name="name" data-title="Enter property name">Cost</a></th>
                <td><a href="#" id="currentCost" class="propertyValue" data-type="textarea" data-pk="1"
                       data-name="name" data-title="Enter cost">$10</a></td>
            </tr>
            <tr>
                <th scope="row"><a href="#" id="propertyName2" class="propertyName" data-type="text" data-pk="1"
                                   data-name="name" data-title="Enter property name">Description</a></th>
                <td><a href="#" id="currentDescription" class="propertyValue" data-type="textarea" data-pk="1"
                       data-name="name" data-title="Enter description">To use the piStar tool the user will open a specific URL on her web browser.</a></td>
            </tr>
            <tr>
                <th scope="row">
                    <a href="#" id="" class="propertyAdd" data-type="text" data-pk="1"
                       data-name="name" data-title="Enter description" data-placeholder="ahhhh" title="Add a new property to this element">
                    <i data-feather="plus-circle"></i>
                    <!--<i data-feather="plus"></i>-->
                    <!--<i data-feather="plus-square"></i>-->
                    Add
                    </a>
                </th>
                <td></td>
            </tr>
            <!--<tr>-->
                <!--<th scope="row">Name</th>-->
                <!--<td><a href="#" id="currentName" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter name">Use piStar</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName1" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Cost</a></th>-->
                <!--<td><a href="#" id="currentCost" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter cost">$10</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName2" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Description</a></th>-->
                <!--<td><a href="#" id="currentDescription" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter description">To use the piStar tool the user will open a-->
                    <!--specific URL on her web browser.</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row">Name</th>-->
                <!--<td><a href="#" id="currentName" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter name">Use piStar</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName1" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Cost</a></th>-->
                <!--<td><a href="#" id="currentCost" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter cost">$10</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName2" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Description</a></th>-->
                <!--<td><a href="#" id="currentDescription" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter description">To use the piStar tool the user will open a-->
                    <!--specific URL on her web browser.</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row">Name</th>-->
                <!--<td><a href="#" id="currentName" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter name">Use piStar</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName1" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Cost</a></th>-->
                <!--<td><a href="#" id="currentCost" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter cost">$10</a></td>-->
            <!--</tr>-->
            <!--<tr>-->
                <!--<th scope="row"><a href="#" id="propertyName2" class="propertyValue" data-type="text" data-pk="1"-->
                                   <!--data-name="name" data-title="Enter property name">Description</a></th>-->
                <!--<td><a href="#" id="currentDescription" class="propertyValue" data-type="text" data-pk="1"-->
                       <!--data-name="name" data-title="Enter description">To use the piStar tool the user will open a-->
                    <!--specific URL on her web browser.</a></td>-->
            <!--</tr>-->
            </tbody>
        </table>

        <!--<h6 class="sidepanel-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">-->
            <!--<span>ACTION BUTTONS</span>-->
            <!--<a class="d-flex align-items-center text-muted" href="#">-->
                <!--+-->
            <!--</a>-->
        <!--</h6>-->
        <!--<hr />-->
        <div class="button-area" style="padding:5px;" >
        <!--<div class="card text-center bg-light">-->
            <!--<div class="card-body">-->
                <!--<a href="#" class="btn btn-sm btn-outline-primary">Collapse/expand</a>-->
            <!--</div>-->
        <!--</div>-->
<!--<br />-->
<!--<br />-->
            <!--<div class="list-group">-->
                <!--<a href="#" class="list-group-item list-group-item-action">-->
                    <!--Collapse/expand-->
                <!--</a>-->
                <!--<li class="list-group-item d-flex justify-content-between align-items-center">-->
                    <!--Number of elements-->
                    <!--<span class="badge badge-primary badge-pill">12</span>-->
                <!--</li>-->

                <!--<li class="list-group-item d-flex justify-content-between align-items-center">-->
                    <!--Number of dependencies-->
                    <!--<span class="badge badge-primary badge-pill">4</span>-->
                <!--</li>-->
                <!--<a href="#" class="list-group-item list-group-item-action">Porta ac consectetur ac</a>-->
                <!--<a href="#" class="list-group-item list-group-item-action disabled">Vestibulum at eros</a>-->
            <!--</div>-->

            <!--<br />-->
            <!--<br />-->
            Actions:
            <div class="list-group">
                <a href="#" class="list-group-item list-group-item-action">
                    Collapse/expand
                </a>
            </div>


        </div>
        <br />
        Info:
            <div class="list-group rounded-0">
            <li class="list-group-item d-flex justify-content-between align-items-center rounded-0">
                Number of elements
                <span class="badge badge-primary badge-pill">12</span>
            </li>

            <li class="list-group-item d-flex justify-content-between align-items-center rounded-0">
                Number of dependencies
                <span class="badge badge-primary badge-pill">4</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center rounded-0">
                [WARNING] Elements with no name
                <span class="badge badge-primary badge-pill">1</span>
            </li>
        </div>


    </div>
</div>

<!--<div class="sidebarResize">-->

<!--</div>-->

<main role="main" class="main">
    <div id="diagramBoxOuter">
        <div id="diagramBoxInner">
            <div id="diagram"></div>
            <!--<img src="goalModel.svg" width="1376"/>-->
        </div>
    </div>

</main>
<!--</div>-->

<script src="istarcore/lib/jquery.min.js"></script>
<script src="istarcore/lib/lodash.min.js"></script>
<script src="istarcore/lib/backbone.min.js"></script>

<script src="istarcore/lib/joint.min.js"></script>
<script src="lib/bootstrap/bootstrap.min.js"></script>

<script src="lib/bootstrap3-editable/js/bootstrap-editable.js" type="text/javascript"></script>

 istar core
<script src="js/istarcore.shapes.js"></script>
<script src="istarcore/istarcore.metamodel.js"></script>
<script src="istarcore/istarcore.js"></script>
<script src="istarcore/metamodel.js"></script>

 tool specific
<script src="istarcore/fileManager.js"></script>
<script src="js/models/addButton.js"></script>
<script src="js/views/addButton.js"></script>
<script src="js/views/addButtonDropdownItem.js"></script>
<script src="js/controllers/addButton.js"></script>
<script src="js/views/propertiesTable.js"></script>
<script src="js/ui.js"></script>
<script src="js/examples.js"></script>

<!-- insert your plugin(s) here, after this line -->

<!-- end of plugin(s) area -->

<script src="js/main.js"></script>


<script>
    //x-editable setup
    $.fn.editable.defaults.mode = 'inline';
    $(document).ready(function () {
        $('.propertyName, .propertyValue, .propertyAdd').editable({showbuttons: 'bottom'});
    });

    //sidepanel resizing
    var sidepanelSizes = [25, 270, 600];
    var sidepanelCurrentSize = 1;
    var sidepanelSizeForXeditable = 1;
    var expandSidepanel = function () {
        if (sidepanelCurrentSize < (sidepanelSizes.length - 1)) {
            //TODO check if the next size is not larger than the current window/document size
            sidepanelCurrentSize++;
            $('.sidepanel').css('width', sidepanelSizes[sidepanelCurrentSize] + 'px');
            $('#diagramBoxOuter').css('margin-left', sidepanelSizes[sidepanelCurrentSize] + 'px');

            if (sidepanelCurrentSize === 1) {
                $('.sidepanel').removeClass('collapsed');
            }
            if (sidepanelCurrentSize === (sidepanelSizes.length - 1)) {
                $('.sidepanel').addClass('full');
            }
        }
    };
    var collapseSidepanel = function () {
        if (sidepanelCurrentSize > 0) {
            if (sidepanelCurrentSize === (sidepanelSizes.length - 1)) {
                $('.sidepanel').removeClass('full');
            }
            sidepanelCurrentSize--;
            $('.sidepanel').css('width', sidepanelSizes[sidepanelCurrentSize] + 'px');
            $('#diagramBoxOuter').css('margin-left', sidepanelSizes[sidepanelCurrentSize] + 'px');

            if (sidepanelCurrentSize === 0) {
                $('.sidepanel').addClass('collapsed');
            }
        }
    };
    $('.collapseSidepanelButton').click(collapseSidepanel);
    $('.expandSidepanelButton').click(expandSidepanel);

    //menu-body toggling
    var isMenuBodyCollapsed = false;
    var menuBodyHeight = 0;
    $(document).ready(function () {
        menuBodyHeight = $('.menu-body').height();
    });
    $('.menu-bar .active').click(function () {
        if (isMenuBodyCollapsed) {
            $('.menu-body').slideDown(200);
            isMenuBodyCollapsed = false;
            $('#diagramBoxOuter').height($('#diagramBoxOuter').height() - menuBodyHeight);
            $('.sidepanel').height($('.sidepanel').height() - menuBodyHeight);
            $(this).find('.toggleMenuSymbol').html('&#8648');
        }
        else {
            $('.menu-body').slideUp(200);
            isMenuBodyCollapsed = true;
            $('#diagramBoxOuter').height($('#diagramBoxOuter').height() + menuBodyHeight);
            $('.sidepanel').height($('.sidepanel').height() + menuBodyHeight);
            $(this).find('.toggleMenuSymbol').html('&#8650');
        }
    });

    // $('.propertiesPanel  a').click(function () {
    $('.propertiesPanel  a').on('shown', function(e, editable) {
            // sidepanelSizeForXeditable = sidepanelCurrentSize;
            // expandSidepanel();
    });
    $('.propertiesPanel  a').on('hidden', function(e, reason) {
        if (sidepanelSizeForXeditable !== sidepanelCurrentSize) {
            // collapseSidepanel();
        }
    });


</script>

</body>
</html>